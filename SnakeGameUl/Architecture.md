# Архитектура Snake Game

## Принципы проектирования

### 1. Объектно-ориентированное программирование
- **Инкапсуляция**: каждый класс отвечает за свою область
- **Наследование**: Figure → Snake, HorizontalLine, VerticalLine
- **Полиморфизм**: все фигуры имеют общие методы Draw(), IsHit()

### 2. Разделение ответственности
- **Program**: управление игрой и пользовательский интерфейс
- **Snake**: логика движения и поведения змейки
- **Stats**: управление данными и статистикой
- **Walls**: управление препятствиями
- **MusicManager**: звуковое сопровождение

### 3. Композиция над наследованием
- Player содержит Snake и Stats
- Walls содержит список Figure
- Snake содержит список Point

## Паттерны проектирования

### Factory Method
- **FoodCreator**: создает еду в случайных позициях
- **Walls**: создает различные типы линий

### Singleton (частично)
- **MusicManager**: статический класс для управления звуками

### Strategy (неявно)
- Различные уровни сложности изменяют поведение игры

## Структура данных

### Игровое поле
```
Console (80x25)
├── Stats area (top 5 lines)
├── Game area (walls + snake + food)
└── Game Over area (center)
```

### Змейка
```
List<Point> pList
├── [0] tail (удаляется при движении)
├── [1] body segment
├── ...
└── [n] head (добавляется при движении)
```

### Файловая система
```
Project Root/
├── stats.txt (Name, Score, Length, HighScore, Level)
├── leaderboard.txt (Name,Score per line)
└── assets/
    ├── background.wav
    ├── eat.wav
    └── death.wav
```

## Игровой цикл

```
1. Initialize → MusicManager, UI
2. Game Loop:
   ├── Input → Player name, difficulty
   ├── Create → Player, Snake, Walls, Food
   ├── Game Loop:
   │   ├── Check collisions
   │   ├── Handle food eating
   │   ├── Move snake
   │   ├── Update speed
   │   └── Handle input
   ├── Game Over → Save stats, show leaderboard
   └── Restart? → Y/N
3. Cleanup → Stop music, exit
```

## Производительность

### Оптимизации
- Только измененные части перерисовываются
- Звуки загружаются один раз при инициализации
- Статистика обновляется только при изменении

### Ограничения
- Консольное приложение (ограниченная графика)
- Однопоточность (кроме звуков)
- Фиксированный размер игрового поля

## Расширяемость

### Легко добавить
- Новые уровни сложности
- Дополнительные препятствия
- Новые звуковые эффекты
- Различные типы еды

### Требует рефакторинга
- Многопользовательский режим
- Графический интерфейс
- Сохранение игры
- Настройки игры